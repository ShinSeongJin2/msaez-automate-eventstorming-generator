<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aggregate ì„œë¸Œê·¸ë˜í”„ DDL ì²˜ë¦¬ íë¦„</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .title {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 40px;
            font-size: 2.5em;
            font-weight: bold;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 50px;
            font-size: 1.2em;
        }
        
        .flow-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            align-items: center;
        }
        
        .phase {
            width: 100%;
            max-width: 1200px;
            border: 2px solid #3498db;
            border-radius: 15px;
            background: #f8f9ff;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(52, 152, 219, 0.15);
        }
        
        .phase-header {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 15px 25px;
            font-weight: bold;
            font-size: 1.3em;
            text-align: center;
        }
        
        .phase-content {
            padding: 25px;
        }
        
        .step-group {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .step {
            background: white;
            border: 2px solid #e74c3c;
            border-radius: 10px;
            padding: 20px;
            min-width: 280px;
            flex: 1;
            max-width: 350px;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.1);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .step:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.2);
        }
        
        .step-header {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 10px 15px;
            margin: -20px -20px 15px -20px;
            border-radius: 8px 8px 0 0;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .step-content {
            line-height: 1.6;
            color: #2c3e50;
        }
        
        .generator {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            font-weight: bold;
            color: #856404;
            text-align: center;
        }
        
        .arrow {
            width: 0;
            height: 0;
            border-left: 25px solid transparent;
            border-right: 25px solid transparent;
            border-top: 30px solid #3498db;
            margin: 0 auto;
            position: relative;
        }
        
        .arrow::after {
            content: '';
            position: absolute;
            top: -35px;
            left: -15px;
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 20px solid white;
        }
        
        .decision {
            background: #d4edda;
            border: 2px solid #28a745;
            border-radius: 50px;
            padding: 15px 25px;
            text-align: center;
            font-weight: bold;
            color: #155724;
            margin: 15px auto;
            max-width: 300px;
        }
        
        .parallel-flow {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .flow-branch {
            flex: 1;
            min-width: 300px;
            max-width: 500px;
        }
        
        .validation-step {
            background: #f8d7da;
            border: 2px solid #dc3545;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            color: #721c24;
            font-weight: bold;
            text-align: center;
        }
        
        .success-step {
            background: #d1ecf1;
            border: 2px solid #17a2b8;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            color: #0c5460;
            font-weight: bold;
            text-align: center;
        }
        
        .legend {
            margin-top: 40px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 1px solid #dee2e6;
        }
        
        .legend-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #495057;
            font-size: 1.2em;
        }
        
        .legend-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            border-radius: 5px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 1px solid #666;
        }
        
        .retry-flow {
            background: #fff3cd;
            border: 2px dashed #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            color: #856404;
            text-align: center;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">Aggregate ì„œë¸Œê·¸ë˜í”„ DDL ì²˜ë¦¬ íë¦„</h1>
        <p class="subtitle">ì‚¬ìš©ìë¡œë¶€í„° ì „ë‹¬ëœ DDLì„ ì• ê·¸ë¦¬ê±°íŠ¸ ìƒì„±ì— í™œìš©í•˜ëŠ” ì „ì²´ í”„ë¡œì„¸ìŠ¤</p>
        
        <div class="flow-container">
            <!-- Phase 1: DDL ì´ˆê¸° ì²˜ë¦¬ -->
            <div class="phase">
                <div class="phase-header">Phase 1: DDL ì´ˆê¸° ì²˜ë¦¬ ë° í•„ë“œ ì¶”ì¶œ</div>
                <div class="phase-content">
                    <div class="step-group">
                        <div class="step">
                            <div class="step-header">1. ì¤€ë¹„ ë‹¨ê³„ ì‹œì‘</div>
                            <div class="step-content">
                                â€¢ Bounded Contextë³„ DDL ìˆ˜ì§‘<br>
                                â€¢ ì²˜ë¦¬í•  ì• ê·¸ë¦¬ê±°íŠ¸ ëª©ë¡ ì´ˆê¸°í™”<br>
                                â€¢ requirements.ddlì—ì„œ DDL ë¬¸ìì—´ ì¶”ì¶œ
                            </div>
                        </div>
                        
                        <div class="step">
                            <div class="step-header">2. DDL í•„ë“œ ì¶”ì¶œ</div>
                            <div class="step-content">
                                <div class="generator">ExtractDDLFieldsGenerator</div>
                                â€¢ CREATE TABLE ë¬¸ íŒŒì‹±<br>
                                â€¢ ì»¬ëŸ¼ëª…ë§Œ ì¶”ì¶œ (íƒ€ì…, ì œì•½ì¡°ê±´ ì œì™¸)<br>
                                â€¢ ì¤‘ë³µ ì œê±°ëœ í•„ë“œ ëª©ë¡ ìƒì„±<br>
                                â€¢ camelCaseë¡œ ë³€í™˜
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="arrow"></div>
            
            <!-- Phase 2: ì• ê·¸ë¦¬ê±°íŠ¸ë³„ í•„ë“œ í• ë‹¹ -->
            <div class="phase">
                <div class="phase-header">Phase 2: ì• ê·¸ë¦¬ê±°íŠ¸ë³„ DDL í•„ë“œ í• ë‹¹</div>
                <div class="phase-content">
                    <div class="decision">ì• ê·¸ë¦¬ê±°íŠ¸ ê°œìˆ˜ê°€ 1ê°œì¸ê°€?</div>
                    
                    <div class="parallel-flow">
                        <div class="flow-branch">
                            <div class="step">
                                <div class="step-header">ë‹¨ì¼ ì• ê·¸ë¦¬ê±°íŠ¸ (ìµœì í™”)</div>
                                <div class="step-content">
                                    â€¢ ëª¨ë“  DDL í•„ë“œë¥¼ í•´ë‹¹ ì• ê·¸ë¦¬ê±°íŠ¸ì— ì§ì ‘ í• ë‹¹<br>
                                    â€¢ AI í˜¸ì¶œ ì—†ì´ ì¦‰ì‹œ ì²˜ë¦¬<br>
                                    â€¢ ì„±ëŠ¥ ìµœì í™”ëœ ê²½ë¡œ
                                </div>
                            </div>
                        </div>
                        
                        <div class="flow-branch">
                            <div class="step">
                                <div class="step-header">ë‹¤ì¤‘ ì• ê·¸ë¦¬ê±°íŠ¸ (AI í• ë‹¹)</div>
                                <div class="step-content">
                                    <div class="generator">AssignDDLFieldsToAggregateDraft</div>
                                    â€¢ ë„ë©”ì¸ ì»¨í…ìŠ¤íŠ¸ ë¶„ì„<br>
                                    â€¢ í•„ë“œëª…ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê¸°ë°˜ í• ë‹¹<br>
                                    â€¢ ê° ì• ê·¸ë¦¬ê±°íŠ¸ë³„ í•„ë“œ ë¦¬ìŠ¤íŠ¸ ìƒì„±
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="validation-step">
                        í• ë‹¹ ê²€ì¦: ëˆ„ë½ í•„ë“œ ë° ì´ˆê³¼ í•„ë“œ í™•ì¸
                    </div>
                    
                    <div class="retry-flow">
                        ëˆ„ë½ í•„ë“œ ë°œê²¬ ì‹œ ìµœëŒ€ 3íšŒ ì¬ì‹œë„ (missing_fields ì²˜ë¦¬)
                    </div>
                </div>
            </div>
            
            <div class="arrow"></div>
            
            <!-- Phase 3: ì• ê·¸ë¦¬ê±°íŠ¸ ìƒì„± ì‹¤í–‰ -->
            <div class="phase">
                <div class="phase-header">Phase 3: ì• ê·¸ë¦¬ê±°íŠ¸ ìƒì„± ì‹¤í–‰</div>
                <div class="phase-content">
                    <div class="step-group">
                        <div class="step">
                            <div class="step-header">3. DDL í•„ë“œ ì„¤ì •</div>
                            <div class="step-content">
                                â€¢ ì‚¬ì „ í• ë‹¹ëœ DDL í•„ë“œë¥¼ extracted_ddl_fieldsë¡œ ì„¤ì •<br>
                                â€¢ í˜„ì¬ ì²˜ë¦¬ ì¤‘ì¸ ì• ê·¸ë¦¬ê±°íŠ¸ì˜ í•„ë“œ ëª©ë¡ ì¤€ë¹„<br>
                                â€¢ ddl_extraction_attempted í”Œë˜ê·¸ ì„¤ì •
                            </div>
                        </div>
                        
                        <div class="step">
                            <div class="step-header">4. ì• ê·¸ë¦¬ê±°íŠ¸ ìƒì„±</div>
                            <div class="step-content">
                                <div class="generator">CreateAggregateActionsByFunction</div>
                                â€¢ ìš”ì•½ëœ ES ê°’ê³¼ DDL í•„ë“œ í¬í•¨í•˜ì—¬ í˜¸ì¶œ<br>
                                â€¢ Aggregate, ValueObject, Enumeration ì•¡ì…˜ ìƒì„±<br>
                                â€¢ í† í° ì œí•œ ì‹œ ES ê°’ ìš”ì•½ ì²˜ë¦¬
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="arrow"></div>
            
            <!-- Phase 4: í›„ì²˜ë¦¬ ë° ê²€ì¦ -->
            <div class="phase">
                <div class="phase-header">Phase 4: í›„ì²˜ë¦¬ ë° DDL í•„ë“œ ê²€ì¦</div>
                <div class="phase-content">
                    <div class="step-group">
                        <div class="step">
                            <div class="step-header">5. DDL í•„ë“œ í¬í•¨ ê²€ì¦</div>
                            <div class="step-content">
                                â€¢ ìƒì„±ëœ ì•¡ì…˜ì˜ ëª¨ë“  í”„ë¡œí¼í‹° ìˆ˜ì§‘<br>
                                â€¢ extracted_ddl_fieldsì™€ ë¹„êµ<br>
                                â€¢ ëˆ„ë½ëœ í•„ë“œ ì‹ë³„<br>
                                â€¢ camelCase ë³€í™˜ ê³ ë ¤í•œ ë§¤ì¹­
                            </div>
                        </div>
                        
                        <div class="step">
                            <div class="step-header">6. ì•¡ì…˜ í•„í„°ë§ ë° ì •ë¦¬</div>
                            <div class="step-content">
                                â€¢ ìœ íš¨í•œ ì†ì„± ì•¡ì…˜ë§Œ í•„í„°ë§<br>
                                â€¢ Bounded Context ID ë³µì›<br>
                                â€¢ ëŒ€ìƒ ì• ê·¸ë¦¬ê±°íŠ¸ ID ê²€ì¦<br>
                                â€¢ ES ê°’ì— ì•¡ì…˜ ì ìš©
                            </div>
                        </div>
                    </div>
                    
                    <div class="decision">ëˆ„ë½ëœ DDL í•„ë“œê°€ ìˆëŠ”ê°€?</div>
                    
                    <div class="parallel-flow">
                        <div class="flow-branch">
                            <div class="success-step">
                                ëª¨ë“  í•„ë“œ í¬í•¨ ì™„ë£Œ â†’ ê²€ì¦ ë‹¨ê³„ë¡œ ì§„í–‰
                            </div>
                        </div>
                        
                        <div class="flow-branch">
                            <div class="step">
                                <div class="step-header">7. ëˆ„ë½ í•„ë“œ í• ë‹¹</div>
                                <div class="step-content">
                                    <div class="generator">AssignFieldsToActionsGenerator</div>
                                    â€¢ ê¸°ì¡´ ì•¡ì…˜ êµ¬ì¡° ë¶„ì„<br>
                                    â€¢ ëˆ„ë½ í•„ë“œë¥¼ ì ì ˆí•œ ë¶€ëª¨ì— í• ë‹¹<br>
                                    â€¢ Java ë°ì´í„° íƒ€ì… ì¶”ë¡ <br>
                                    â€¢ í”„ë¡œí¼í‹° ì¶”ê°€ í›„ ì¬ê²€ì¦
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="arrow"></div>
            
            <!-- Phase 5: ì™„ë£Œ -->
            <div class="phase">
                <div class="phase-header">Phase 5: í”„ë¡œì„¸ìŠ¤ ì™„ë£Œ</div>
                <div class="phase-content">
                    <div class="success-step">
                        âœ… DDL í•„ë“œê°€ ì™„ì „íˆ í¬í•¨ëœ ì• ê·¸ë¦¬ê±°íŠ¸ ì•¡ì…˜ ìƒì„± ì™„ë£Œ<br>
                        âœ… ES ê°’ ì—…ë°ì´íŠ¸ ë° ë‹¤ìŒ ì• ê·¸ë¦¬ê±°íŠ¸ ì²˜ë¦¬ ì¤€ë¹„
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ë²”ë¡€ -->
        <div class="legend">
            <div class="legend-title">ğŸ“‹ ë²”ë¡€</div>
            <div class="legend-items">
                <div class="legend-item">
                    <div class="legend-color" style="background: #fff3cd; border-color: #ffc107;"></div>
                    <span>AI ìƒì„±ê¸° (Generator)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #d4edda; border-color: #28a745;"></div>
                    <span>ì˜ì‚¬ê²°ì • ì§€ì </span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #f8d7da; border-color: #dc3545;"></div>
                    <span>ê²€ì¦ ë‹¨ê³„</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #d1ecf1; border-color: #17a2b8;"></div>
                    <span>ì„±ê³µ/ì™„ë£Œ ë‹¨ê³„</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #fff3cd; border: 2px dashed #ffc107;"></div>
                    <span>ì¬ì‹œë„ íë¦„</span>
                </div>
            </div>
        </div>
        
        <!-- ì£¼ìš” íŠ¹ì§• -->
        <div class="legend" style="margin-top: 20px;">
            <div class="legend-title">ğŸ” ì£¼ìš” íŠ¹ì§•</div>
            <div style="line-height: 1.8; color: #495057;">
                <strong>â€¢ ì™„ì „ì„± ë³´ì¥:</strong> DDLì˜ ëª¨ë“  í•„ë“œê°€ ìµœì¢… ì• ê·¸ë¦¬ê±°íŠ¸ì— í¬í•¨ë˜ë„ë¡ ê²€ì¦<br>
                <strong>â€¢ ì§€ëŠ¥í˜• í• ë‹¹:</strong> ë„ë©”ì¸ ì»¨í…ìŠ¤íŠ¸ë¥¼ ê³ ë ¤í•œ AI ê¸°ë°˜ í•„ë“œ í• ë‹¹<br>
                <strong>â€¢ ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜:</strong> ëˆ„ë½ í•„ë“œ ë°œê²¬ ì‹œ ìë™ ì¬í• ë‹¹ ì²˜ë¦¬<br>
                <strong>â€¢ ì„±ëŠ¥ ìµœì í™”:</strong> ë‹¨ì¼ ì• ê·¸ë¦¬ê±°íŠ¸ì˜ ê²½ìš° AI í˜¸ì¶œ ìƒëµ<br>
                <strong>â€¢ íƒ€ì… ì¶”ë¡ :</strong> í•„ë“œëª… ê¸°ë°˜ Java ë°ì´í„° íƒ€ì… ìë™ ì¶”ë¡ 
            </div>
        </div>
    </div>
</body>
</html>
